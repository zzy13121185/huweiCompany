(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/some/topNotice/topNotice"],{"02d6":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})},"0acf":function(e,t,o){"use strict";o.r(t);var n=o("e131"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=a.a},"3e0a":function(e,t,o){"use strict";var n=o("b3a7"),a=o.n(n);a.a},8727:function(e,t,o){"use strict";(function(e){o("2bd2"),o("921b");n(o("66fd"));var t=n(o("9243"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},9243:function(e,t,o){"use strict";o.r(t);var n=o("02d6"),a=o("0acf");for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);o("3e0a");var r=o("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=s.exports},b3a7:function(e,t,o){},e131:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o("4bee"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return c(e)||s(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){var o=[],n=!0,a=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)if(o.push(r.value),t&&o.length===t)break}catch(c){a=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(a)throw i}}return o}function c(e){if(Array.isArray(e))return e}var u={data:function(){return{index:-1,picker:[],pickerID:[],pointsType:"",toast:"请选择通知来源",dangerRoad:"",noticeFrom:"",date:"请选择整改截止日期",now:"",originalData:[],dangerInfoRow:[],showDangerCheckBox:!1,choose:"",current:-1,dangerCheckBox:[],place:"",dec:"",yaoqiu:"",switchB:!1,switchC:!1,imgList:[],commitTime:0}},methods:{PickerChange:function(e){console.log(e),this.index=e.detail.value,this.toast=this.picker[this.index];var t=!0,o=!1,n=void 0;try{for(var a,i=this.pickerID[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var r=a.value;this.toast==r.deptName&&(this.pointsType=r.pointsType)}}catch(s){o=!0,n=s}finally{try{t||null==i.return||i.return()}finally{if(o)throw n}}console.log(this.pointsType)},getFrom:function(){var t=this;e.request({url:t.$store.state.urlPrefix+"/Home/Get_pointsType",data:{source:"上级通知"}}).then(function(e){var o=i(e,2),n=(o[0],o[1]);if(console.log(n.data),0==n.data.code){t.pickerID=n.data.data;var a=!0,r=!1,s=void 0;try{for(var c,u=t.pickerID[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;t.picker.push(l.deptName)}}catch(d){r=!0,s=d}finally{try{a||null==u.return||u.return()}finally{if(r)throw s}}}})},chooseFrom:function(){},showMoadel:function(t){e.showModal({title:"提示",content:t,showCancel:!1,success:function(e){e.confirm}})},ChooseImage:function(){var t=this;e.chooseImage({count:4,sizeType:["compressed"],sourceType:["camera","album"],success:function(e){0!=t.imgList.length?t.imgList=t.imgList.concat(e.tempFilePaths):t.imgList=e.tempFilePaths}})},ViewImage:function(t){e.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},DelImg:function(t){var o=this;e.showModal({title:"提示",content:"确定要删除这张照片？",cancelText:"取消",confirmText:"确定",success:function(e){e.confirm&&o.imgList.splice(t.currentTarget.dataset.index,1)}})},SwitchB:function(e){this.switchB=e.detail.value,console.log(this.switchB)},SwitchC:function(e){this.switchC=e.detail.value,console.log(this.switchC)},DateChange:function(e){this.date=e.detail.value},reset:function(){this.dangerInfoRow=this.originalData,this.dangerCheckBox=[],this.showDangerCheckBox=!1,this.dangerRoad="",this.choose="",this.current=-1},getInfo:function(){var t=this;e.request({url:t.$store.state.urlPrefix+"/Home/Get_AllBZ2",data:{DWCD:t.$store.state.userInfo.DWCD},method:"GET",header:{"content-type":"application/json"},success:function(e){var o=JSON.parse(e.data);0==e.data.length?t.showMoadel("此处没有隐患源"):(t.originalData=o,t.dangerInfoRow=o)}})},radioChange:function(e){for(var t=0;t<this.dangerCheckBox.length;t++)if(this.dangerCheckBox[t].YSCD===e.target.value){this.current=t,this.choose=e.target.value,this.dangerRoad=this.dangerRoad+"->"+this.dangerCheckBox[t].YSMC;break}},getNext:function(t){var o=this;e.showLoading({title:"加载中",mask:!0}),e.request({url:o.$store.state.urlPrefix+"/Home/Choose_YS3",method:"GET",data:{id:t.XZCD,RYXH:o.$store.state.userInfo.RYXH},header:{"custom-header":"application/json"},success:function(n){var a=JSON.parse(n.data);0==a.length?o.showMoadel("此处没有隐患源"):a[0].XZMC?(o.dangerInfoRow=a,o.dangerRoad=o.dangerRoad+t.XZMC+"->"):(o.dangerCheckBox=a,o.dangerRoad=o.dangerRoad+t.XZMC,o.showDangerCheckBox=!0),e.hideLoading()}})},commit:function(){console.log("commit");var t=this,o=t.imgList.length;t.place&&t.dec&&t.proposal&&t.yaoqiu&&t.pointsType?"请选择整改截止日期"==this.date?t.showMoadel("请选择整改截止日期!"):t.choose?0==t.imgList.length?t.showMoadel("请选择隐患照片!"):(e.showLoading({title:"提交中。。。",mask:!0}),t.uploadimg(o)):t.showMoadel("请选择隐患!"):t.showMoadel("请完善隐患信息！")},uploadimg:function(t){var o=this,n=o.$store.state.urlPrefix+"/Process/Everyone_Sava_images2";e.uploadFile({url:n,filePath:o.imgList[o.commitTime],name:"image",formData:{RYXH:o.$store.state.userInfo.RYXH,YSCD:o.choose},success:function(n){o.commitTime=o.commitTime+1,"ok"==n.data?o.commitTime<t?o.uploadimg(t):(o.commitTime=0,o.commitSafeWord()):(o.commitTime=0,e.hideLoading(),e.showModal({title:"提示",content:"上报失败！",showCancel:!1,success:function(t){t.confirm&&e.reLaunch({url:"/pages/basic/home/home"})}}))}})},commitSafeWord:function(){var t,o=this;t=o.switchC?2:1,e.request({url:o.$store.state.urlPrefix+"/Home/Add_AbarbeitungInform",data:{EndTime:o.date,RYXH:o.$store.state.userInfo.RYXH,YSCD:o.choose,place:o.place,describe:o.dec,require:o.yaoqiu,opinion:o.proposal,isReport:o.switchB,grade:t,pointsType:o.pointsType},method:"GET",header:{"content-type":"application/json"},success:function(t){e.hideLoading(),0==t.data.code?e.showModal({title:"提示",content:"提交成功",showCancel:!1,success:function(t){t.confirm&&e.reLaunch({url:"/pages/basic/home/home"})}}):e.showModal({title:"提示",content:"提交失败",showCancel:!1,success:function(t){t.confirm&&e.reLaunch({url:"/pages/basic/home/home"})}})}})}},mounted:function(){this.now=n.default.now(),this.getInfo(),this.getFrom()}};t.default=u}).call(this,o("543d")["default"])}},[["8727","common/runtime","common/vendor"]]]);