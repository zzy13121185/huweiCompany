(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/basic/login/login"],{1201:function(t,e,o){"use strict";o.r(e);var n=o("7fdc"),a=o("bc8b");for(var r in a)"default"!==r&&function(t){o.d(e,t,function(){return a[t]})}(r);var i=o("2877"),s=Object(i["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"3c8c":function(t,e,o){"use strict";(function(t){o("2bd2"),o("921b");n(o("66fd"));var e=n(o("1201"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"7fdc":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return a})},bc8b:function(t,e,o){"use strict";o.r(e);var n=o("e9d3"),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},e9d3:function(t,e,o){"use strict";(function(t){function o(t,e){return r(t)||a(t,e)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){var o=[],n=!0,a=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)if(o.push(i.value),e&&o.length===e)break}catch(c){a=!0,r=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(a)throw r}}return o}function r(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{TabCur:0,tabRow:["登录","注册"],loginForm:{account:"",password:""},userOriginalCode:"",checkCodeText:"获取验证码",yzm:"",checkCode:"",telNum:"",loginWay:"登录"}},methods:{showToast:function(e){t.showModal({title:"提示",content:e,showCancel:!1,success:function(t){t.confirm}})},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,0==this.TabCur?this.loginWay="登录":this.loginWay="注册"},getCheckCode:function(){var e=this,o=60;if(11==this.telNum.length){if("获取验证码"==this.checkCodeText||"重新获取"==this.checkCodeText){this.setInter=setInterval(function(){0==o?(clearInterval(e.setInter),e.checkCodeText="重新获取",e.yzm=""):(e.checkCodeText=o+"秒",o-=1)},1e3);var n=this;t.request({url:n.$store.state.urlPrefix+"/Home/Get_Code",data:{phone:n.telNum},method:"GET",header:{"content-type":"application/json"},success:function(t){n.yzm="","系统中没有该手机号码"==t.data?(n.showToast("请输入正确的手机号"),clearInterval(n.setInter),n.checkCodeText="获取验证码"):n.checkCode=t.data.substring(t.data.length-4,t.data.length)},complete:function(t){}})}}else this.showToast("请输入正确的手机号")},loginByWechat:function(){var e=this;e.getUserCode(),t.showLoading({title:"登录中。。。",mask:!0}),t.request({url:e.$store.state.urlPrefix+"/Home/We_Login",data:{wechat:e.userOriginalCode}}).then(function(n){t.hideLoading();var a=o(n,2),r=(a[0],a[1]);if("暂无数据"==r.data)e.showToast("账号或者密码错误");else{var i=JSON.parse(r.data);e.$store.state.userInfo=i[0],t.reLaunch({url:"../home/home"})}})},getUserCode:function(){var e=this;t.login({provider:"weixin",success:function(t){e.userOriginalCode=t.code}})},loginByAccount:function(){var e=this;t.showLoading({title:"登录中...",mask:!0}),t.request({url:e.$store.state.urlPrefix+"/Home/Login",data:{NM:e.loginForm.account,PSD:e.loginForm.password}}).then(function(n){t.hideLoading();var a=o(n,2),r=(a[0],a[1]);if("暂无数据"==r.data)e.showToast("账号或者密码错误");else{var i=JSON.parse(r.data);console.log(i),e.$store.state.userInfo=i[0],t.reLaunch({url:"../home/home"})}})},registerCommit:function(){if(""!=this.yzm)if(this.checkCode!=this.yzm)this.showToast("请输入正确的验证码");else{var e=this;t.request({url:e.$store.state.urlPrefix+"/Home/Phone_Zhuche",data:{phone:e.telNum,wechat:e.userOriginalCode},method:"GET",header:{"content-type":"application/json"},success:function(o){"no"==o.data?(e.showToast("该手机号没有权限"),e.checkCode="",e.telNum="",e.yzm=""):"ok"==o.data?(t.showModal({title:"提示",content:"注册成功",showCancel:!1,success:function(t){t.confirm&&(e.TabCur=0)}}),e.checkCode="",e.yzm="",e.telNum=""):(e.showToast("注册失败"),e.checkCode="",e.yzm="",e.telNum=""),clearInterval(e.setInter),e.checkCodeText="获取验证码"}})}else this.showToast("请输入正确的验证码")},commit:function(){0==this.TabCur?this.loginByAccount():this.registerCommit()}},mounted:function(){this.getUserCode()}};e.default=i}).call(this,o("543d")["default"])}},[["3c8c","common/runtime","common/vendor"]]]);