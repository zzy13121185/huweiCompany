(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/basic/login/login"],{6216:function(e,t,o){"use strict";(function(e){function o(e,t){return r(e)||a(e,t)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var o=[],n=!0,a=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)if(o.push(i.value),t&&o.length===t)break}catch(c){a=!0,r=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(a)throw r}}return o}function r(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{TabCur:0,tabRow:["登录","注册"],loginForm:{account:"",password:""},userOriginalCode:"",checkCodeText:"获取验证码",yzm:"",checkCode:"",telNum:"",loginWay:"登录"}},methods:{showToast:function(t){e.showModal({title:"提示",content:t,showCancel:!1,success:function(e){e.confirm}})},tabSelect:function(e){this.TabCur=e.currentTarget.dataset.id,0==this.TabCur?this.loginWay="登录":this.loginWay="注册"},getCheckCode:function(){var t=this,o=60;if(11==this.telNum.length){if("获取验证码"==this.checkCodeText||"重新获取"==this.checkCodeText){this.setInter=setInterval(function(){0==o?(clearInterval(t.setInter),t.checkCodeText="重新获取",t.yzm=""):(t.checkCodeText=o+"秒",o-=1)},1e3);var n=this;e.request({url:n.$store.state.urlPrefix+"/Home/Get_Code",data:{phone:n.telNum},method:"GET",header:{"content-type":"application/json"},success:function(e){n.yzm="","系统中没有该手机号码"==e.data?(n.showToast("请输入正确的手机号"),clearInterval(n.setInter),n.checkCodeText="获取验证码"):n.checkCode=e.data.substring(e.data.length-4,e.data.length)},complete:function(e){}})}}else this.showToast("请输入正确的手机号")},loginByWechat:function(){var t=this;t.getUserCode(),e.showLoading({title:"登录中。。。",mask:!0}),e.request({url:t.$store.state.urlPrefix+"/Home/We_Login",data:{wechat:t.userOriginalCode}}).then(function(n){e.hideLoading();var a=o(n,2),r=(a[0],a[1]);if("暂无数据"==r.data)t.showToast("账号或者密码错误");else{var i=JSON.parse(r.data);t.$store.state.userInfo=i[0],e.reLaunch({url:"../home/home"})}})},getUserCode:function(){var t=this;e.login({provider:"weixin",success:function(e){t.userOriginalCode=e.code}})},loginByAccount:function(){var t=this;e.showLoading({title:"登录中...",mask:!0}),e.request({url:t.$store.state.urlPrefix+"/Home/Login",data:{NM:t.loginForm.account,PSD:t.loginForm.password}}).then(function(n){e.hideLoading();var a=o(n,2),r=(a[0],a[1]);if("暂无数据"==r.data)t.showToast("账号或者密码错误");else{var i=JSON.parse(r.data);t.$store.state.userInfo=i[0],e.reLaunch({url:"../home/home"})}})},registerCommit:function(){if(""!=this.yzm)if(this.checkCode!=this.yzm)this.showToast("请输入正确的验证码");else{var t=this;e.request({url:t.$store.state.urlPrefix+"/Home/Phone_Zhuche",data:{phone:t.telNum,wechat:t.userOriginalCode},method:"GET",header:{"content-type":"application/json"},success:function(o){"no"==o.data?(t.showToast("该手机号没有权限"),t.checkCode="",t.telNum="",t.yzm=""):"ok"==o.data?(e.showModal({title:"提示",content:"注册成功",showCancel:!1,success:function(e){e.confirm&&(t.TabCur=0)}}),t.checkCode="",t.yzm="",t.telNum=""):(t.showToast("注册失败"),t.checkCode="",t.yzm="",t.telNum=""),clearInterval(t.setInter),t.checkCodeText="获取验证码"}})}else this.showToast("请输入正确的验证码")},commit:function(){0==this.TabCur?this.loginByAccount():this.registerCommit()}},mounted:function(){this.getUserCode()}};t.default=i}).call(this,o("543d")["default"])},"6e71":function(e,t,o){"use strict";o.r(t);var n=o("f147"),a=o("c259");for(var r in a)"default"!==r&&function(e){o.d(t,e,function(){return a[e]})}(r);var i=o("2877"),s=Object(i["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=s.exports},c259:function(e,t,o){"use strict";o.r(t);var n=o("6216"),a=o.n(n);for(var r in n)"default"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r);t["default"]=a.a},e3c1:function(e,t,o){"use strict";(function(e){o("3dd1"),o("921b");n(o("66fd"));var t=n(o("6e71"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},f147:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})}},[["e3c1","common/runtime","common/vendor"]]]);