(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/function/scan"],{"234c":function(t,e,o){"use strict";var n=o("5503"),a=o.n(n);a.a},"4f10":function(t,e,o){"use strict";o.r(e);var n=o("68c6"),a=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);e["default"]=a.a},5503:function(t,e,o){},"65ce":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return a})},"68c6":function(t,e,o){"use strict";(function(t){function o(t,e){return i(t)||a(t,e)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){var o=[],n=!0,a=!1,i=void 0;try{for(var r,c=t[Symbol.iterator]();!(n=(r=c.next()).done);n=!0)if(o.push(r.value),e&&o.length===e)break}catch(s){a=!0,i=s}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw i}}return o}function i(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={name:"temHome",props:{msg:{type:String,default:""},type:{type:String,default:""},fromm:{type:String,default:""}},data:function(){return{qrCode:"",qrCodeType:"",laizi:"",xfData:[],imgrow:[],xgData:[],HYid:"",PlaceNo:"",lon:"",lat:"",commitTime:0,isDanger:!0,dec:"",position:""}},onLoad:function(){},mounted:function(){this.qrCode=this._props.msg,this.qrCodeType=this._props.type,this.laizi=this._props.fromm,this.getData(),this.$emit("hideLoading",.1),this.getLocation(),console.log(this.laizi)},methods:{SwitchA:function(t){var e=!0,o=!1,n=void 0;try{for(var a,i=this.xfData[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value;if(r.Name==t.currentTarget.dataset.title){var c=!0,s=!1,l=void 0;try{for(var u,f=r.Detail[Symbol.iterator]();!(c=(u=f.next()).done);c=!0){var h=u.value;h.content==t.currentTarget.dataset.info.content&&(h.isCheck=t.detail.value)}}catch(d){s=!0,l=d}finally{try{c||null==f.return||f.return()}finally{if(s)throw l}}}}}catch(d){o=!0,n=d}finally{try{e||null==i.return||i.return()}finally{if(o)throw n}}console.log(this.xfData)},showModel:function(e){t.showModal({title:"提示",content:e,showCancel:!1,success:function(t){t.confirm}})},getData:function(){var e=this;t.request({url:e.$store.state.urlPrefix+"/School/Get_HD",data:{QRCode:e.qrCode,type:e.qrCodeType}}).then(function(n){var a=o(n,2),i=(a[0],a[1]);if(console.log(i.data),0==i.data.code){if("XF"==e.qrCodeType){e.xfData=i.data.data[0].Detail,e.HYid=i.data.data[0].ID,e.PlaceNo=i.data.data[0].PlaceNo,console.log(e.xfData);var r=!0,c=!1,s=void 0;try{for(var l,u=e.xfData[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var f=l.value;";"==f.Detail[f.Detail.length-1]&&(f.Detail=f.Detail.substr(0,f.Detail.length-1));var h=f.Detail.split(";");f.Detail=[];var d=!0,m=!1,g=void 0;try{for(var p,v=h[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var w=p.value;f.Detail.push({isCheck:!1,content:w})}}catch(y){m=!0,g=y}finally{try{d||null==v.return||v.return()}finally{if(m)throw g}}}}catch(y){c=!0,s=y}finally{try{r||null==u.return||u.return()}finally{if(c)throw s}}}}else t.showToast({title:"扫描失败",duration:2e3,icon:"loading"})})},ChooseImage:function(){var e=this;t.chooseImage({count:1,sizeType:["compressed"],sourceType:["camera"],success:function(t){console.log(t),e.imgrow.push(t.tempFilePaths[0])}})},ViewImage:function(e){t.previewImage({urls:this.imgrow,current:e.currentTarget.dataset.url})},DelImg:function(e){var o=this;console.log(e),t.showModal({title:"删除",content:"确定要删除这张图片吗？",cancelText:"取消",confirmText:"确定",success:function(t){t.confirm&&o.imgrow.splice(e.currentTarget.dataset.index,1)}})},getLocation:function(){var e=this;t.getLocation({type:"gcj02",success:function(t){e.lon=t.longitude,e.lat=t.latitude}})},commitXf:function(){var e=this.imgrow.length,o=[],n=!0,a=!1,i=void 0;try{for(var r,c=this.xfData[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var s=r.value,l=!0,u=!1,f=void 0;try{for(var h,d=s.Detail[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var m=h.value;0==m.isCheck&&o.push({content:m.content,title:s.Name})}}catch(w){u=!0,f=w}finally{try{l||null==d.return||d.return()}finally{if(u)throw f}}}}catch(w){a=!0,i=w}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}for(var g="",p=0;p<o.length;p++){var v=o[p];g+="".concat(v.title,":").concat(v.content,".")}console.log(g),0==this.imgrow.length?this.showModel("请拍摄照片！"):this.position?(t.showLoading({title:"提交中。。。",mask:!0}),this.dec=g,this.isDanger=!!g,this.uploadSafeImg(e)):this.showModel("请输入检查记录！")},safeCommit:function(){var e=this;t.request({url:e.$store.state.urlPrefix+"/School/ScanQRCode_Check_Safe",data:{type:e.qrCodeType,RYXH:e.$store.state.userInfo.RYXH,PlaceNo:e.PlaceNo}}).then(function(e){var n=o(e,2),a=(n[0],n[1]);t.hideLoading(),0==a.data.code?t.showModal({title:"提示",content:"提交成功！",showCancel:!1,confirmText:"确定",success:function(e){e.confirm&&t.reLaunch({url:"/pages/basic/home/home"})}}):1==a.data.code?t.showModal({title:"提示",content:a.data.msg,showCancel:!1,confirmText:"确定",success:function(e){t.reLaunch({url:"/pages/basic/home/home"})}}):t.showModal({title:"提示",content:"上传失败",showCancel:!1,confirmText:"确定",success:function(e){t.reLaunch({url:"/pages/basic/home/home"})}})})},dangerCommit:function(){var e=this,n=[];n.push({HDID:e.HYid,CZWT:e.dec,position:e.position}),n=JSON.stringify(n),t.request({url:e.$store.state.urlPrefix+"/School/ScanQRCode_Check_Danger",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{type:e.qrCodeType,RYXH:e.$store.state.userInfo.RYXH,PlaceNo:e.PlaceNo,hdDetail:n,lat:e.lat,lon:e.lon}}).then(function(e){var n=o(e,2),a=(n[0],n[1]);t.hideLoading(),0==a.data.code?t.showModal({title:"提示",content:"提交成功！",showCancel:!1,confirmText:"确定",success:function(e){e.confirm&&t.reLaunch({url:"/pages/basic/home/home"})}}):1==a.data.code?t.showModal({title:"提示",content:a.data.msg,showCancel:!1,confirmText:"确定",success:function(e){e.confirm&&t.reLaunch({url:"/pages/basic/home/home"})}}):t.showModal({title:"提示",content:"上传失败",showCancel:!1,confirmText:"确定",success:function(e){e.confirm&&t.reLaunch({url:"/pages/basic/home/home"})}})})},uploadSafeImg:function(e){var o=this,n=o.$store.state.urlPrefix+"/Process/Everyone_safe_images2";t.uploadFile({url:n,filePath:o.imgrow[o.commitTime],name:"image",formData:{RYXH:o.$store.state.userInfo.RYXH,HDID:o.HYid},success:function(n){o.commitTime=o.commitTime+1,"ok"==n.data?o.commitTime<e?o.uploadSafeImg(e):(o.commitTime=0,o.isDanger?"隐患上报"==o.fromm?o.HYdangerCommit():o.dangerCommit():"隐患上报"==o.fromm?o.HYsafeCommit()():o.safeCommit()):(o.commitTime=0,t.hideLoading(),t.showModal({title:"提示",content:"上报失败！",showCancel:!1,success:function(e){e.confirm&&t.reLaunch({url:"/pages/basic/home/home"})}}))}})},HYdangerCommit:function(){var e=this,n=[];n.push({HDID:e.HYid,CZWT:e.dec,position:e.position}),n=JSON.stringify(n),t.request({url:e.$store.state.urlPrefix+"/school/ScanQRCode_report",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{RYXH:e.$store.state.userInfo.RYXH,hdDetail:n,lat:e.lat,lon:e.lon}}).then(function(e){var n=o(e,2),a=(n[0],n[1]);t.hideLoading(),0==a.data.code?t.showModal({title:"提示",content:"提交成功！",showCancel:!1,confirmText:"确定",success:function(e){e.confirm&&t.reLaunch({url:"/pages/basic/home/home"})}}):1==a.data.code?t.showModal({title:"提示",content:a.data.msg,showCancel:!1,confirmText:"确定",success:function(e){e.confirm&&t.reLaunch({url:"/pages/basic/home/home"})}}):t.showModal({title:"提示",content:"上传失败",showCancel:!1,confirmText:"确定",success:function(e){e.confirm&&t.reLaunch({url:"/pages/basic/home/home"})}})})},HYsafeCommit:function(){var e=this;t.request({url:e.$store.state.urlPrefix+"/school/ScanQRCode_report_safe",data:{RYXH:e.$store.state.userInfo.RYXH,HDIDs:e.HYid,position:e.position,lat:e.lat,lon:e.lon}}).then(function(e){var n=o(e,2),a=(n[0],n[1]);t.hideLoading(),0==a.data.code?t.showModal({title:"提示",content:"提交成功！",showCancel:!1,confirmText:"确定",success:function(e){e.confirm&&t.reLaunch({url:"/pages/basic/home/home"})}}):1==a.data.code?t.showModal({title:"提示",content:a.data.msg,showCancel:!1,confirmText:"确定",success:function(e){t.reLaunch({url:"/pages/basic/home/home"})}}):t.showModal({title:"提示",content:"上传失败",showCancel:!1,confirmText:"确定",success:function(e){t.reLaunch({url:"/pages/basic/home/home"})}})})}}};e.default=r}).call(this,o("543d")["default"])},cbd7:function(t,e,o){"use strict";o.r(e);var n=o("65ce"),a=o("4f10");for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);o("234c");var r=o("2877"),c=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=c.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/function/scan-create-component',
    {
        'pages/function/scan-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("cbd7"))
        })
    },
    [['pages/function/scan-create-component']]
]);                
